local class IntBox
   var bar : int

   def init(bar : int) : unit
      this.bar = bar
   end

   def newBox(bar : int) : IntBox
      new IntBox(bar)
   end

   def getInt() : int
      this.bar
   end
end

active class Foo
   var box : IntBox

   def init(bar : int) : unit
      this.box = new IntBox(bar)
   end

   def bestowBox() : Bestowed[IntBox]
      bestow(this.box)
   end
end

active class Main
   def main() : unit
      var b = new Foo(11)
      var box = get(b ! bestowBox())
      var ibox = get(box ! newBox(42))
      println(get(box ! getInt()))
      println(ibox.getInt())
   end
end
